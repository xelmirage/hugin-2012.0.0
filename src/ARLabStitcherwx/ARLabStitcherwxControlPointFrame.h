#ifndef __ARLabStitcherwxControlPointFrame__
#define __ARLabStitcherwxControlPointFrame__

/**
@file
Subclass of ControlPointFrame, which is generated by wxFormBuilder.
*/

#include "ARLabStitcherwx.h"
#include "base_wx/huginConfig.h"
#include "base_wx/wxPlatform.h"
#include "base_wx/platform.h"
#include<boost/lexical_cast.hpp>
#include <hugin_basic.h>

//// end generated include
#include <iostream>
#include<vector>
#include <wx\string.h>
//// end generated include
using namespace PT;
using namespace AppBase;

/** Implementing ControlPointFrame */
class ARLabStitcherwxControlPointFrame : public ControlPointFrame
{
public:
	/** Constructor */
	ARLabStitcherwxControlPointFrame(wxWindow* parent);
	void setPTO(wxString s);

private:
	wxString ptoFile;
	Panorama pano;
	HuginBase::CPointVector cpForLeftImg;
	std::vector<unsigned int> rightImgNrs;
	//// end generated class members
	DECLARE_EVENT_TABLE()
public:
	int getReady();
	int UpdateDisplay();
	void choiceLeftChanged(wxCommandEvent& ee);
	void choiceRightChanged(wxCommandEvent & ee);

private:
	bool previewLeftIsReady;
private:
	void OnResize(wxSizeEvent& e);
	void setImage(wxStaticBitmap* m_staticBitmap, wxString imagePath, wxImage preimg);
	wxString leftImgPath;
	wxString rightImgPath;
	bool isLeftImgReady;
	bool isRightImgReady;
	wxImage imgLeft, imgRight;

public:
	void UpdatePreview();
	void OnPaint(wxPaintEvent& ee);
	void paintCP(wxDC* dc);
private:
	HuginBase::CPointVector CPToBeShown;
};

#endif // __ARLabStitcherwxControlPointFrame__
